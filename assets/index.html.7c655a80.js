import{_ as r,r as o,o as c,c as d,a as e,d as s,w as i,b as n,e as a}from"./app.dedb4427.js";const p={},h=a('<h1 id="web-socket-chat-bot-documentation" tabindex="-1"><a class="header-anchor" href="#web-socket-chat-bot-documentation" aria-hidden="true">#</a> Web Socket Chat Bot documentation</h1><p>This is a documentation page on the Web Socket chat bot and on how to make a library that uses web socket to execute commands in the MCC and processes events sent by the MCC.</p><p>Please read the <a href="#important-things">Important things</a> before everything.</p><h1 id="page-index" tabindex="-1"><a class="header-anchor" href="#page-index" aria-hidden="true">#</a> Page index</h1>',4),m=a('<li><a href="#important-things">Important things</a><ul><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#limitations">Limitations</a></li><li><a href="#precisionvalidity-of-the-information-in-this-guide">Precision of information</a></li></ul></li><li><a href="#how-does-it-work">How does it work?</a></li><li><a href="#sending-commands-to-mcc">Sending commands</a></li>',3),u=e("li",null,[e("a",{href:"#reference-implementation"},"Reference Implementation")],-1),D=e("h2",{id:"reference-implementation",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#reference-implementation","aria-hidden":"true"},"#"),n(" Reference implementation")],-1),y=e("p",null,"I have made a reference implementation in TypeScript/JavaScript, it is avaliable here:",-1),b={href:"https://github.com/milutinke/MCC.js",target:"_blank",rel:"noopener noreferrer"},v=a(`<p>It is great for better understanding how this works.</p><h2 id="important-things" tabindex="-1"><a class="header-anchor" href="#important-things" aria-hidden="true">#</a> Important things</h2><h3 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites" aria-hidden="true">#</a> Prerequisites</h3><p>This guide/documentation assumes that you have enough of programming knowledge to know:</p><ul><li>What Web Socket is</li><li>Basics of networking and concurency</li><li>What JSON is</li><li>What are the various data types such as boolean, integer, long, float, double, object, dictionary/hash map</li></ul><p>Without knowing those, I highly recommend learning about those concepts before trying to implement your own library.</p><h3 id="limitations" tabindex="-1"><a class="header-anchor" href="#limitations" aria-hidden="true">#</a> Limitations</h3><p>The Web Socket chat bot should be considered experimental and prone to change, it has not been fully tested and might change, keep an eye on updates on our official Discord server.</p><h3 id="precision-validity-of-the-information-in-this-guide" tabindex="-1"><a class="header-anchor" href="#precision-validity-of-the-information-in-this-guide" aria-hidden="true">#</a> Precision/Validity of the information in this guide</h3><p>This guide has been mostly generated from the code itself, so the types are C# types, except in few cases where I have manually changed them.</p><p>For some thing you will have to dig in to the MCC C# code of the Chat Bot and various helper classes.</p><p><strong>Some information sent by the MCC, for example entity metadata, block ids, item ids, or various other data is different for each Minecraft Version, thus you need to map it for each minecraft version.</strong></p><p>Some events might not be that useful, eg. <code>OnNetworkPacket</code></p><h2 id="how-does-it-work" tabindex="-1"><a class="header-anchor" href="#how-does-it-work" aria-hidden="true">#</a> How does it work?</h2><p>So, basically, this Web Socket Chat Bot is a chat bot that has a Web Socket server running while you&#39;re connected to a minecraft server.</p><p>It sends events, and listens for commands and responds to commands.</p><p>It has build in authentication, which requires you to send a command to authenticate if the the password is set, if it is not set, it should automatically authenticate you on the first command.</p><p>You also can name every connection (session) with an alias.</p><p>The flow of the protocol is the following:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">Connect to the chat bot via web socket</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span>
<span class="line"><span style="color:#D4D4D4;">            |</span></span>
<span class="line"><span style="color:#D4D4D4;">            |</span></span>
<span class="line"><span style="color:#D4D4D4;">           \\ /</span></span>
<span class="line"><span style="color:#D4D4D4;">            \`</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span>
<span class="line"><span style="color:#D4D4D4;">Optionally set a session alias/name with &quot;ChangeSessionId&quot; command </span></span>
<span class="line"><span style="color:#D4D4D4;">(this can be done multiple times at any point)</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span>
<span class="line"><span style="color:#D4D4D4;">            |</span></span>
<span class="line"><span style="color:#D4D4D4;">            |</span></span>
<span class="line"><span style="color:#D4D4D4;">           \\ /</span></span>
<span class="line"><span style="color:#D4D4D4;">            \`</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span>
<span class="line"><span style="color:#D4D4D4;">Send an &quot;Authenticate&quot; command if there is a password set </span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span>
<span class="line"><span style="color:#D4D4D4;">            |</span></span>
<span class="line"><span style="color:#D4D4D4;">            |</span></span>
<span class="line"><span style="color:#D4D4D4;">           \\ /</span></span>
<span class="line"><span style="color:#D4D4D4;">            \`</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span>
<span class="line"><span style="color:#D4D4D4;">Send commands and listen for events</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In order to implement a library that communicates witht this chat bot, you need to make a way to send commands, remember the sent commands via the <code>requestId</code> value, and listen for <code>OnWsCommandResponse</code> event in which you need to detect if your command has been executed by looking for the <code>requestId</code> that matches the one you&#39;ve sent. I also recommend you put a 5-10 seconds command execution timeout, where you discard the command if it has not been executed in the given timeout range.</p><h2 id="sending-commands-to-mcc" tabindex="-1"><a class="header-anchor" href="#sending-commands-to-mcc" aria-hidden="true">#</a> Sending commands to MCC</h2><p>You can send text in the chat, execute client commands or execute remote procedures (WebSocket Chat Bot commands).</p><p>Each thing that is sent to the chat bot results in a response through the <a href="#onwscommandresponse"><code>OnWsCommandResponse</code></a> event.</p><h3 id="sending-chat-messages" tabindex="-1"><a class="header-anchor" href="#sending-chat-messages" aria-hidden="true">#</a> Sending chat messages</h3><p>To send a chat message just send a plain text with your message to via the web socket.</p><h3 id="executing-client-commands" tabindex="-1"><a class="header-anchor" href="#executing-client-commands" aria-hidden="true">#</a> Executing client commands</h3><p>To execute a client command, just send plain text with your command.</p><p>Example: <code>/move suth</code></p><h3 id="execution-remote-procedures-websocket-chat-bot-commands" tabindex="-1"><a class="header-anchor" href="#execution-remote-procedures-websocket-chat-bot-commands" aria-hidden="true">#</a> Execution remote procedures (WebSocket Chat Bot commands)</h3><p>In order to execute a remote procedure, you need to send a json encoded string in the following format:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;command&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;&lt;command name here&gt;&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;requestId&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;&lt;randomly generated string for identification&gt;&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;parameters&quot;</span><span style="color:#D4D4D4;">: [ </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&quot;some string&quot;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&quot;etc..&quot;</span><span style="color:#D4D4D4;"> ]</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="command" tabindex="-1"><a class="header-anchor" href="#command" aria-hidden="true">#</a> <code>command</code></h4><p>Refers to the name of the command</p><h4 id="requestid" tabindex="-1"><a class="header-anchor" href="#requestid" aria-hidden="true">#</a> <code>requestId</code></h4><p>Is a unique indentifier you generate on each command, it will be returned in the response of the command execution (<a href="#onwscommandresponse"><code>OnWsCommandResponse</code></a>), use it to track if a command has been successfully executed or not, and to get the return value if it has been successfully executed. (<em>It&#39;s recommended to generate at least 7 characters to avoid collision, best to use an UUID format</em>).</p><h4 id="parameters" tabindex="-1"><a class="header-anchor" href="#parameters" aria-hidden="true">#</a> <code>parameters</code></h4><p>Are parameters (attibutes) of the procedure you&#39;re executing, they&#39;re sent as an array of data of various types, the Web Socket chat bot does parsing and conversion and returns an error if you have sent a wrong type for the given parameters, of if you haven&#39;t send enough of them.</p><p><strong>Example:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;command&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;Authenticate&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;requestId&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;8w9u60-q39ik&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;parameters&quot;</span><span style="color:#D4D4D4;">: [</span><span style="color:#CE9178;">&quot;wspass12345&quot;</span><span style="color:#D4D4D4;">]</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,40);function f(g,x){const t=o("RouterLink"),l=o("ExternalLinkIcon");return c(),d("div",null,[h,e("ul",null,[m,e("li",null,[s(t,{to:"/guide/websocket/Commands.html"},{default:i(()=>[n("Websocket Commands")]),_:1})]),e("li",null,[s(t,{to:"/guide/websocket/Events.html"},{default:i(()=>[n("Websocket Events")]),_:1})]),u]),D,y,e("p",null,[e("a",b,[n("https://github.com/milutinke/MCC.js"),s(l)])]),v])}const w=r(p,[["render",f],["__file","index.html.vue"]]);export{w as default};
