import{_ as o,r as p,o as t,c,a as s,b as n,d as e,e as l}from"./app.dedb4427.js";const i={},r=l('<h1 id="chatbot-の作成" tabindex="-1"><a class="header-anchor" href="#chatbot-の作成" aria-hidden="true">#</a> ChatBot の作成</h1><ul><li><a href="#notes">メモ</a></li><li><a href="#requirements">必要条件</a></li><li><a href="#quick-introduction">簡単な紹介</a></li><li><a href="#examples">サンプル</a></li><li><a href="#c#-api">C# API</a></li></ul><h2 id="メモ" tabindex="-1"><a class="header-anchor" href="#メモ" aria-hidden="true">#</a> メモ</h2>',3),D={class:"custom-container tip"},d=s("p",{class:"custom-container-title"},"ヒント",-1),y={href:"https://github.com/MCCTeam/Minecraft-Console-Client/blob/master/MinecraftClient/Scripting/ChatBot.cs",target:"_blank",rel:"noopener noreferrer"},C=s("a",{href:"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"},"サンプル",-1),u=s("p",null,"Minecraft Console Client には ChatBot（プラグイン）を作成することができる豊富な C# API があり、複雑な自動化システムを作成するのに便利です。",-1),h=s("h2",{id:"必要条件",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#必要条件","aria-hidden":"true"},"#"),n(" 必要条件")],-1),v=s("ul",null,[s("li",null,"C# の基礎知識"),s("li",null,"テキスト エディター")],-1),m=s("p",null,"C# に関する基本的な知識がない場合は、C# の基本に慣れてください。",-1),b=s("p",null,"短期集中コース",-1),g={href:"https://www.youtube.com/watch?v=67oWw9TanOk&list=PL82C6-O4XrHfoN_Y4MwGvJz5BntiL0z0D",target:"_blank",rel:"noopener noreferrer"},E=s("p",null,"より深く学ぶには:",-1),B={href:"https://www.youtube.com/playlist?list=PLdo4fOcmZ0oVxKLQCHpiUWun7vlJJvUiN",target:"_blank",rel:"noopener noreferrer"},f={href:"https://docs.microsoft.com/en-us/dotnet/csharp/",target:"_blank",rel:"noopener noreferrer"},_=l(`<h2 id="簡単な紹介" tabindex="-1"><a class="header-anchor" href="#簡単な紹介" aria-hidden="true">#</a> 簡単な紹介</h2><p>C# の基本的な知識があることを前提としています。</p><div class="custom-container tip"><p class="custom-container-title">ヒント</p><p><strong>ここでは、「ChatBot」と「スクリプト」は同じ意味の用語として使用します。</strong></p></div><p>MCC がインストールされているフォルダーと同じ場所に、新しい C# ソース ファイル <code>ExampleChatBot.cs</code> を作成します。</p><p>次のサンプル コードを貼り付けます。</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//MCCScript 1.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">MCC</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">LoadBot</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ExampleChatBot</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">//MCCScript Extensions</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">// The code and comments above are defining a &quot;Script Metadata&quot; section</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">// Every single chat bot (script) must be a class which extends the ChatBot class.</span></span>
<span class="line"><span style="color:#6A9955;">// Your class must be instantiates in the &quot;Script Metadata&quot; section and passed to MCC.LoadBot function.</span></span>
<span class="line"><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ExampleChatBot</span><span style="color:#D4D4D4;"> : </span><span style="color:#4EC9B0;">ChatBot</span></span>
<span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// This method will be called when the script has been initialized for the first time, it&#39;s called only once</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// Here you can initialize variables, eg. Dictionaries. etc...</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">override</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">Initialize</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#DCDCAA;">LogToConsole</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;An example Chat Bot has been initialized!&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// This is a function that will be run when we get a chat message from a server</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// In this example it just detects the type of the message and prints it out</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">override</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">GetText</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">string</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">string</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">message</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">string</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">username</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">GetVerbatim</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#DCDCAA;">IsPrivateMessage</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">ref</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">message</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">ref</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">username</span><span style="color:#D4D4D4;">))</span></span>
<span class="line"><span style="color:#D4D4D4;">        {</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#DCDCAA;">LogToConsole</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">username</span><span style="color:#D4D4D4;"> + </span><span style="color:#CE9178;">&quot; has sent you a private message: &quot;</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">message</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">else</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#DCDCAA;">IsChatMessage</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">ref</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">message</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">ref</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">username</span><span style="color:#D4D4D4;">))</span></span>
<span class="line"><span style="color:#D4D4D4;">        {</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#DCDCAA;">LogToConsole</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">username</span><span style="color:#D4D4D4;"> + </span><span style="color:#CE9178;">&quot; has said: &quot;</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">message</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MCC を起動し、サーバーに接続して、内部コマンド <code>/script ExampleChatBot.cs</code> を実行します。</p><p>正常に動作すると、メッセージ <code>[Example Chat Bot] An example Chat Bot has been initialised!</code> がコンソール ログに表示されます。</p><h3 id="chatbot-の構造" tabindex="-1"><a class="header-anchor" href="#chatbot-の構造" aria-hidden="true">#</a> ChatBot の構造</h3><p>ChatBot（スクリプト）の構造は次のとおりです。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">&lt;script metadata&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">&lt;chat bot class&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Script Metadata は、コメントを使用して C# と MCC の形式を組み合わせたカスタム形式のセクションです。</p><p>すべての ChatBot（スクリプト）の最初にこのセクションが必要です。</p><h3 id="script-metadata-形式" tabindex="-1"><a class="header-anchor" href="#script-metadata-形式" aria-hidden="true">#</a> Script Metadata 形式</h3><p><code>//MCCScript 1.0</code> は、<strong>Script Metadata</strong> セクションの開始を示します。最初の行に書かれていないと、ChatBot（スクリプト）が読み込まれず、エラーが発生します。</p><p><code>//MCCScript Extensions</code> は、<strong>Script Metadata</strong> セクションの終了を示します。ChatBot（スクリプト）クラスの前に定義する必要があります。</p><p>ChatBot（スクリプト）が <code>//MCCScript 1.0</code> の行と <code>//MCCScript Extensions</code> の行の間で正常に読み込まれるようにするには、ChatBot（スクリプト）クラスをインスタンス化し、それを <code>MCC.LoadBot</code> 関数に渡す必要があります。</p><p>サンプル コード:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">MCC.LoadBot(new YourChatBotClassNameHere());</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Script Metadata</strong> セクションでは、C# パッケージとライブラリを次のように含めることができます: <code>//using &lt;namespace&gt;</code> または <code>/dll &lt;dll name&gt;</code></p><div class="custom-container tip"><p class="custom-container-title">ヒント</p><p><strong><code>//</code> と文字列の間に空白を追加しないでください。</strong></p></div><p>デフォルトでは、次のパッケージが読み込まれます。</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">System</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Collections</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Generic</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Text</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">RegularExpressions</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Linq</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Text</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">IO</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Net</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Threading</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MinecraftClient</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MinecraftClient</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Mapping</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">using</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MinecraftClient</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">Inventory</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>サンプル:</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//using System.Collections.Immutable</span></span>
<span class="line"><span style="color:#6A9955;">//dll MyDll.dll</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>サンプル:</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//MCCScript 1.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">//using System.Collections.Immutable</span></span>
<span class="line"><span style="color:#6A9955;">//dll MyDll.dll</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">MCC</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">LoadBot</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ExampleChatBot</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">//MCCScript Extensions</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="chatbot-クラス" tabindex="-1"><a class="header-anchor" href="#chatbot-クラス" aria-hidden="true">#</a> ChatBot クラス</h3><p><strong>Script Metadata</strong> セクションの終了後、基本的に必要な数のクラスを定義できます。ChatBot（スクリプト）のメイン クラスが <code>ChatBot</code> クラスを拡張する必要があります。</p><p>すべて任意のメソッドで、必須ではありません。</p><p>ChatBot（スクリプト）が初めてイニシャライズされると、<code>Initialize</code> メソッドが呼び出されます。</p><p>その中で、Dictionaries などの変数をイニシャライズすることができます。</p><div class="custom-container tip"><p class="custom-container-title">ヒント</p><p><strong>データベース接続などのリソースの割り当てについては、<code>AfterGameJoined</code> で割り当て、<code>OnDisconnect</code> で解放することをお勧めします。</strong></p></div>`,33),x=s("h2",{id:"サンプル",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#サンプル","aria-hidden":"true"},"#"),n(" サンプル")],-1),M={href:"https://github.com/MCCTeam/Minecraft-Console-Client/tree/master/MinecraftClient/ChatBots",target:"_blank",rel:"noopener noreferrer"},A={href:"https://github.com/MCCTeam/Minecraft-Console-Client/tree/master/MinecraftClient/config",target:"_blank",rel:"noopener noreferrer"},S=s("h2",{id:"c-api",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#c-api","aria-hidden":"true"},"#"),n(" C# API")],-1),k={href:"https://github.com/MCCTeam/Minecraft-Console-Client/blob/master/MinecraftClient/Scripting/ChatBot.cs",target:"_blank",rel:"noopener noreferrer"},T=s("p",null,"各メソッドは、標準の C# ドキュメント コメントで詳しく説明されています。",-1),w=s("p",null,"将来的には、コード内のドキュメントに基づいてこのセクションを自動生成するスクリプトを作成します。",-1);function q(F,I){const a=p("ExternalLinkIcon");return t(),c("div",null,[r,s("div",D,[d,s("p",null,[s("strong",null,[n("現時点では、このページには ChatBot API の最低限な情報のみ含まれており、基本的な ChatBot の作成方法を学習するには十分な内容です。 詳しくは "),s("a",y,[n("ChatBot.cs"),e(a)]),n(" と"),C,n("をご覧ください。 このページは今後変更される予定です。")])])]),u,h,v,m,b,s("ul",null,[s("li",null,[s("a",g,[n("Teddy Smit による C# 学習の YouTube 再生リスト（英語）"),e(a)])])]),E,s("ul",null,[s("li",null,[s("a",B,[n("Microsoft による C# 学習の YouTube 再生リスト（英語）"),e(a)])]),s("li",null,[s("a",f,[n("Microsoft による C# 関連のドキュメント"),e(a)])])]),_,n(". "),x,s("p",null,[s("a",M,[n("ChatBots"),e(a)]),n(" と "),s("a",A,[n("config"),e(a)]),n(" の GitHub リポジトリでサンプルをご覧ください。")]),S,s("p",null,[n("執筆時点では、まだマージされていないフォークで C# API が変更されているため、"),s("a",k,[n("ChatBot.cs"),e(a)]),n(" を参照用に使用することができます。")]),T,w])}const N=o(i,[["render",q],["__file","creating-bots.html.vue"]]);export{N as default};
